# è´¡çŒ®æŒ‡å—

æ„Ÿè°¢ä½ å¯¹ Mouse Gesture Pilot çš„å…³æ³¨ï¼æˆ‘ä»¬æ¬¢è¿ä»»ä½•å½¢å¼çš„è´¡çŒ®ã€‚

## ğŸ“‹ ç›®å½•

- [è¡Œä¸ºå‡†åˆ™](#è¡Œä¸ºå‡†åˆ™)
- [å¦‚ä½•è´¡çŒ®](#å¦‚ä½•è´¡çŒ®)
- [å¼€å‘æµç¨‹](#å¼€å‘æµç¨‹)
- [ä»£ç è§„èŒƒ](#ä»£ç è§„èŒƒ)
- [æäº¤è§„èŒƒ](#æäº¤è§„èŒƒ)
- [Pull Request æµç¨‹](#pull-request-æµç¨‹)

## ğŸ¤ è¡Œä¸ºå‡†åˆ™

### æˆ‘ä»¬çš„æ‰¿è¯º

ä¸ºäº†è¥é€ ä¸€ä¸ªå¼€æ”¾å’Œå‹å¥½çš„ç¯å¢ƒï¼Œæˆ‘ä»¬æ‰¿è¯ºè®©å‚ä¸é¡¹ç›®å’Œç¤¾åŒºçš„æ¯ä¸ªäººéƒ½èƒ½è·å¾—æ— éªšæ‰°çš„ä½“éªŒã€‚

### æˆ‘ä»¬çš„æ ‡å‡†

**ç§¯æè¡Œä¸ºåŒ…æ‹¬**:
- ä½¿ç”¨å‹å¥½å’ŒåŒ…å®¹çš„è¯­è¨€
- å°Šé‡ä¸åŒçš„è§‚ç‚¹å’Œç»éªŒ
- ä¼˜é›…åœ°æ¥å—å»ºè®¾æ€§æ‰¹è¯„
- å…³æ³¨å¯¹ç¤¾åŒºæœ€æœ‰åˆ©çš„äº‹æƒ…
- å¯¹å…¶ä»–ç¤¾åŒºæˆå‘˜è¡¨ç¤ºåŒç†å¿ƒ

**ä¸å¯æ¥å—çš„è¡Œä¸ºåŒ…æ‹¬**:
- ä½¿ç”¨æ€§åŒ–çš„è¯­è¨€æˆ–å›¾åƒ
- ä¾®è¾±/è´¬æŸçš„è¯„è®ºï¼Œäººèº«æ”»å‡»
- å…¬å¼€æˆ–ç§ä¸‹éªšæ‰°
- æœªç»è®¸å¯å‘å¸ƒä»–äººçš„ç§äººä¿¡æ¯
- å…¶ä»–åœ¨ä¸“ä¸šåœºåˆå¯è¢«è®¤ä¸ºä¸é€‚å½“çš„è¡Œä¸º

## ğŸš€ å¦‚ä½•è´¡çŒ®

### æŠ¥å‘Š Bug

å¦‚æœä½ å‘ç°äº† Bugï¼Œè¯·åœ¨ [GitHub Issues](https://github.com/zhangsong-github/mouse-guesture-crx/issues) ä¸­åˆ›å»ºä¸€ä¸ªæ–°çš„ issueï¼Œå¹¶åŒ…å«ï¼š

- **æ¸…æ™°çš„æ ‡é¢˜**: ç®€æ˜æ‰¼è¦åœ°æè¿°é—®é¢˜
- **è¯¦ç»†æè¿°**: æä¾›è¶³å¤Ÿçš„ä¿¡æ¯ä»¥é‡ç°é—®é¢˜
- **é‡ç°æ­¥éª¤**: ä¸€æ­¥æ­¥è¯´æ˜å¦‚ä½•è§¦å‘é—®é¢˜
- **é¢„æœŸè¡Œä¸º**: è¯´æ˜åº”è¯¥å‘ç”Ÿä»€ä¹ˆ
- **å®é™…è¡Œä¸º**: è¯´æ˜å®é™…å‘ç”Ÿäº†ä»€ä¹ˆ
- **ç¯å¢ƒä¿¡æ¯**:
  - Chrome ç‰ˆæœ¬
  - æ“ä½œç³»ç»Ÿ
  - æ‰©å±•ç‰ˆæœ¬
- **æˆªå›¾æˆ–è§†é¢‘**: å¦‚æœé€‚ç”¨

**Bug æŠ¥å‘Šæ¨¡æ¿**:
```markdown
### é—®é¢˜æè¿°
ç®€è¦æè¿°é—®é¢˜

### é‡ç°æ­¥éª¤
1. æ‰“å¼€...
2. ç‚¹å‡»...
3. çœ‹åˆ°é”™è¯¯...

### é¢„æœŸè¡Œä¸º
åº”è¯¥æ˜¾ç¤º...

### å®é™…è¡Œä¸º
å®é™…æ˜¾ç¤º...

### ç¯å¢ƒ
- Chrome ç‰ˆæœ¬: 119.0.6045.105
- æ“ä½œç³»ç»Ÿ: Windows 11
- æ‰©å±•ç‰ˆæœ¬: 1.1.1

### æˆªå›¾
(å¦‚æœé€‚ç”¨)
```

### å»ºè®®æ–°åŠŸèƒ½

æˆ‘ä»¬æ¬¢è¿æ–°åŠŸèƒ½å»ºè®®ï¼è¯·åˆ›å»ºä¸€ä¸ª issue å¹¶åŒ…å«ï¼š

- **åŠŸèƒ½æè¿°**: æ¸…æ™°åœ°æè¿°ä½ æƒ³è¦çš„åŠŸèƒ½
- **ä½¿ç”¨åœºæ™¯**: è§£é‡Šä¸ºä»€ä¹ˆè¿™ä¸ªåŠŸèƒ½æœ‰ç”¨
- **å¯èƒ½çš„å®ç°**: å¦‚æœæœ‰æƒ³æ³•ï¼Œæè¿°å¦‚ä½•å®ç°
- **æ›¿ä»£æ–¹æ¡ˆ**: è€ƒè™‘è¿‡çš„å…¶ä»–è§£å†³æ–¹æ¡ˆ

**åŠŸèƒ½è¯·æ±‚æ¨¡æ¿**:
```markdown
### åŠŸèƒ½æè¿°
æˆ‘å¸Œæœ›èƒ½å¤Ÿ...

### ä½¿ç”¨åœºæ™¯
è¿™ä¸ªåŠŸèƒ½å¯ä»¥å¸®åŠ©...

### å»ºè®®çš„å®ç°æ–¹å¼
å¯ä»¥é€šè¿‡...å®ç°

### æ›¿ä»£æ–¹æ¡ˆ
ä¹Ÿå¯ä»¥è€ƒè™‘...
```

### æ”¹è¿›æ–‡æ¡£

æ–‡æ¡£æ”¹è¿›ä¹Ÿæ˜¯é‡è¦çš„è´¡çŒ®ï¼åŒ…æ‹¬ï¼š
- ä¿®æ­£æ‹¼å†™æˆ–è¯­æ³•é”™è¯¯
- æ”¹è¿›è¯´æ˜çš„æ¸…æ™°åº¦
- æ·»åŠ ç¼ºå¤±çš„è¯´æ˜
- ç¿»è¯‘æ–‡æ¡£

## ğŸ’» å¼€å‘æµç¨‹

### 1. Fork ä»“åº“

ç‚¹å‡» GitHub é¡µé¢å³ä¸Šè§’çš„ "Fork" æŒ‰é’®

### 2. å…‹éš†ä»“åº“

```bash
git clone https://github.com/YOUR_USERNAME/mouse-guesture-crx.git
cd chrome-guesture-extension
```

### 3. æ·»åŠ ä¸Šæ¸¸ä»“åº“

```bash
git remote add upstream https://github.com/zhangsong-github/mouse-guesture-crx.git
```

### 4. åˆ›å»ºåˆ†æ”¯

```bash
# æ›´æ–° develop åˆ†æ”¯
git checkout develop
git pull upstream develop

# åˆ›å»ºåŠŸèƒ½åˆ†æ”¯
git checkout -b feature/your-feature-name
```

### 5. å®‰è£…ä¾èµ–

```bash
npm install
```

### 6. å¼€å‘

```bash
# å¼€å‘æ¨¡å¼ï¼ˆç›‘å¬æ–‡ä»¶å˜åŒ–ï¼‰
npm run dev

# åœ¨ Chrome ä¸­åŠ è½½æ‰©å±•
# 1. æ‰“å¼€ chrome://extensions/
# 2. å¯ç”¨ "å¼€å‘è€…æ¨¡å¼"
# 3. ç‚¹å‡» "åŠ è½½å·²è§£å‹çš„æ‰©å±•ç¨‹åº"
# 4. é€‰æ‹©é¡¹ç›®çš„ dist ç›®å½•
```

### 7. æµ‹è¯•

```bash
# æ„å»ºç”Ÿäº§ç‰ˆæœ¬
npm run build:prod

# éªŒè¯é…ç½®
npm run validate

# æ‰‹åŠ¨æµ‹è¯•æ‰€æœ‰åŠŸèƒ½
```

### 8. æäº¤ä»£ç 

```bash
git add .
git commit -m "feat: add your feature description"
```

### 9. ä¿æŒåŒæ­¥

```bash
# å®šæœŸåŒæ­¥ä¸Šæ¸¸ä»£ç 
git fetch upstream
git rebase upstream/develop
```

### 10. æ¨é€åˆ†æ”¯

```bash
git push origin feature/your-feature-name
```

### 11. åˆ›å»º Pull Request

åœ¨ GitHub ä¸Šåˆ›å»º PRï¼Œç›®æ ‡åˆ†æ”¯ä¸º `develop`

## ğŸ“ ä»£ç è§„èŒƒ

### JavaScript é£æ ¼

- ä½¿ç”¨ **ES6+** è¯­æ³•
- ä½¿ç”¨ **2 ç©ºæ ¼** ç¼©è¿›
- ä½¿ç”¨ **å•å¼•å·** è¡¨ç¤ºå­—ç¬¦ä¸²
- **åˆ†å·**: å»ºè®®ä½¿ç”¨
- **å‘½åè§„èŒƒ**:
  - å˜é‡å’Œå‡½æ•°: `camelCase`
  - ç±»: `PascalCase`
  - å¸¸é‡: `UPPER_SNAKE_CASE`
  - ç§æœ‰æˆå‘˜: `_leadingUnderscore`

**ç¤ºä¾‹**:
```javascript
// âœ… å¥½çš„
const MAX_GESTURE_LENGTH = 8;

class GestureRecognizer {
  constructor(options) {
    this._sensitivity = options.sensitivity;
    this.patterns = [];
  }

  recognizePattern(points) {
    // å®ç°...
  }
}

// âŒ ä¸å¥½çš„
var max_length = 8;

class gesture_recognizer {
  constructor(options) {
    this.sensitivity = options.sensitivity;
  }
}
```

### æ–‡ä»¶ç»„ç»‡

```
src/
â”œâ”€â”€ background/      # Background Service Worker
â”œâ”€â”€ content/         # Content Scripts
â”œâ”€â”€ core/            # æ ¸å¿ƒä¸šåŠ¡é€»è¾‘ï¼ˆå¯å¤ç”¨ï¼‰
â”œâ”€â”€ ui/              # UI ç»„ä»¶
â”‚   â”œâ”€â”€ components/  # å¯å¤ç”¨ç»„ä»¶
â”‚   â”œâ”€â”€ options/     # é€‰é¡¹é¡µ
â”‚   â”œâ”€â”€ popup/       # å¼¹å‡ºçª—å£
â”‚   â””â”€â”€ sidepanel/   # ä¾§è¾¹æ 
â””â”€â”€ utils/           # å·¥å…·å‡½æ•°ï¼ˆçº¯å‡½æ•°ï¼‰
```

### æ³¨é‡Šè§„èŒƒ

```javascript
/**
 * è¯†åˆ«é¼ æ ‡æ‰‹åŠ¿æ¨¡å¼
 * @param {Array<Point>} points - è½¨è¿¹ç‚¹æ•°ç»„
 * @param {Object} options - è¯†åˆ«é€‰é¡¹
 * @param {number} options.sensitivity - çµæ•åº¦ (0-100)
 * @returns {string|null} è¯†åˆ«åˆ°çš„æ‰‹åŠ¿æ¨¡å¼ï¼Œå¦‚ 'L', 'R', 'UDLR' ç­‰
 */
function recognizeGesture(points, options = {}) {
  // å®ç°...
}

// å•è¡Œæ³¨é‡Šï¼šè§£é‡Šä¸ºä»€ä¹ˆè¿™æ ·åšï¼Œè€Œä¸æ˜¯åšäº†ä»€ä¹ˆ
// è¿‡æ»¤æ‰è·ç¦»å¤ªè¿‘çš„ç‚¹ï¼Œé¿å…æŠ–åŠ¨
const filteredPoints = points.filter((p, i) => {
  if (i === 0) return true;
  return distance(p, points[i - 1]) > MIN_DISTANCE;
});
```

### Chrome API ä½¿ç”¨

```javascript
// âœ… å¥½çš„ï¼šä½¿ç”¨ Manifest V3 API
chrome.storage.local.get(['settings'], (result) => {
  const settings = result.settings || {};
});

// ä½¿ç”¨ async/await
async function getSettings() {
  const result = await chrome.storage.local.get(['settings']);
  return result.settings || {};
}

// âŒ é¿å…ï¼šä¸è¦ä½¿ç”¨åºŸå¼ƒçš„ API
chrome.extension.sendMessage(...); // å·²åºŸå¼ƒ
```

## ğŸ“ æäº¤è§„èŒƒ

æˆ‘ä»¬ä½¿ç”¨ [Conventional Commits](https://www.conventionalcommits.org/) è§„èŒƒï¼š

### æ ¼å¼

```
<type>(<scope>): <subject>

<body>

<footer>
```

### Type ç±»å‹

| Type | è¯´æ˜ | ç¤ºä¾‹ |
|------|------|------|
| `feat` | æ–°åŠŸèƒ½ | `feat(gesture): add pinch gesture support` |
| `fix` | Bug ä¿®å¤ | `fix(tracker): resolve memory leak in path renderer` |
| `docs` | æ–‡æ¡£æ›´æ–° | `docs(readme): update installation steps` |
| `style` | ä»£ç æ ¼å¼ | `style: format code with prettier` |
| `refactor` | é‡æ„ | `refactor(core): simplify gesture recognition logic` |
| `perf` | æ€§èƒ½ä¼˜åŒ– | `perf(renderer): optimize canvas drawing` |
| `test` | æµ‹è¯• | `test(utils): add unit tests for pattern analyzer` |
| `chore` | æ„å»º/å·¥å…· | `chore(deps): upgrade vite to v5.0.0` |
| `build` | æ„å»ºç³»ç»Ÿ | `build: update build script for manifest v3` |

### Scopeï¼ˆå¯é€‰ï¼‰

å¸¸ç”¨ scope:
- `gesture`: æ‰‹åŠ¿è¯†åˆ«ç›¸å…³
- `tracker`: è½¨è¿¹è·Ÿè¸ª
- `renderer`: æ¸²æŸ“å¼•æ“
- `ui`: ç”¨æˆ·ç•Œé¢
- `options`: é€‰é¡¹é¡µ
- `sidepanel`: ä¾§è¾¹æ 
- `i18n`: å›½é™…åŒ–
- `deps`: ä¾èµ–ç®¡ç†

### Subject

- ä½¿ç”¨ç¥ˆä½¿å¥ï¼Œç°åœ¨æ—¶æ€ï¼š"add" è€Œä¸æ˜¯ "added" æˆ– "adds"
- é¦–å­—æ¯å°å†™
- ç»“å°¾ä¸åŠ å¥å·
- é™åˆ¶åœ¨ 50 å­—ç¬¦ä»¥å†…

### Bodyï¼ˆå¯é€‰ï¼‰

- è¯¦ç»†æè¿°æ”¹åŠ¨çš„åŸå› å’Œå†…å®¹
- ä½¿ç”¨ç¥ˆä½¿å¥
- æ¯è¡Œé™åˆ¶åœ¨ 72 å­—ç¬¦ä»¥å†…

### Footerï¼ˆå¯é€‰ï¼‰

- å¼•ç”¨ç›¸å…³ issue: `Closes #123`
- è¯´æ˜ç ´åæ€§å˜æ›´: `BREAKING CHANGE: ...`

### ç¤ºä¾‹

```bash
# ç®€å•æäº¤
git commit -m "feat(gesture): add double-click detection"

# è¯¦ç»†æäº¤
git commit -m "feat(gesture): add double-click detection

Add support for detecting double-click gestures in addition to
mouse trail gestures. This allows users to trigger actions with
quick double-clicks.

Closes #45"

# ç ´åæ€§å˜æ›´
git commit -m "refactor(api)!: change gesture pattern format

BREAKING CHANGE: Gesture patterns now use array format instead
of string format. Users need to update custom gestures.

Migration guide: 'UDLR' -> ['U', 'D', 'L', 'R']"
```

## ğŸ”„ Pull Request æµç¨‹

### PR æ ‡é¢˜

ä½¿ç”¨ä¸æäº¤ä¿¡æ¯ç›¸åŒçš„æ ¼å¼ï¼š
```
feat(gesture): add new gesture recognition algorithm
```

### PR æè¿°æ¨¡æ¿

```markdown
## æ”¹åŠ¨è¯´æ˜
ç®€è¦æè¿°è¿™ä¸ª PR åšäº†ä»€ä¹ˆ

## æ”¹åŠ¨ç±»å‹
- [ ] æ–°åŠŸèƒ½
- [ ] Bug ä¿®å¤
- [ ] æ–‡æ¡£æ›´æ–°
- [ ] ä»£ç é‡æ„
- [ ] æ€§èƒ½ä¼˜åŒ–
- [ ] å…¶ä»–

## ç›¸å…³ Issue
Closes #123

## æµ‹è¯•æƒ…å†µ
- [ ] åœ¨ Chrome ä¸­æ‰‹åŠ¨æµ‹è¯•
- [ ] æµ‹è¯•äº†æ‰€æœ‰å—å½±å“çš„åŠŸèƒ½
- [ ] æµ‹è¯•äº†è¾¹ç•Œæƒ…å†µ

## æˆªå›¾/è§†é¢‘
(å¦‚æœé€‚ç”¨)

## æ£€æŸ¥æ¸…å•
- [ ] ä»£ç éµå¾ªé¡¹ç›®çš„ä»£ç è§„èŒƒ
- [ ] è¿›è¡Œäº†è‡ªæˆ‘ä»£ç å®¡æŸ¥
- [ ] æ·»åŠ äº†å¿…è¦çš„æ³¨é‡Š
- [ ] æ›´æ–°äº†ç›¸å…³æ–‡æ¡£
- [ ] æˆ‘çš„æ”¹åŠ¨æ²¡æœ‰äº§ç”Ÿæ–°çš„è­¦å‘Š
- [ ] æ‰€æœ‰æµ‹è¯•éƒ½é€šè¿‡
```

### ä»£ç å®¡æŸ¥

PR æäº¤åï¼š
1. è‡ªåŠ¨æ£€æŸ¥ä¼šè¿è¡Œï¼ˆå¦‚æœé…ç½®äº† CIï¼‰
2. ç»´æŠ¤è€…ä¼šè¿›è¡Œä»£ç å®¡æŸ¥
3. æ ¹æ®åé¦ˆè¿›è¡Œä¿®æ”¹
4. å®¡æŸ¥é€šè¿‡åä¼šè¢«åˆå¹¶

### åˆå¹¶å

- ä½ çš„åŠŸèƒ½åˆ†æ”¯ä¼šè¢«åˆ é™¤
- æ›´æ–°ä¼šå‡ºç°åœ¨ `develop` åˆ†æ”¯
- åœ¨ä¸‹ä¸€ä¸ªç‰ˆæœ¬å‘å¸ƒæ—¶ä¼šåˆå¹¶åˆ° `main`

## ğŸ—ï¸ é¡¹ç›®ç»“æ„

```
chrome-guesture-extension/
â”œâ”€â”€ .github/                 # GitHub é…ç½®
â”‚   â”œâ”€â”€ ISSUE_TEMPLATE/     # Issue æ¨¡æ¿
â”‚   â””â”€â”€ PULL_REQUEST_TEMPLATE.md
â”œâ”€â”€ chore/                   # å‘å¸ƒç›¸å…³æ–‡æ¡£
â”œâ”€â”€ docs/                    # æ–‡æ¡£å’Œå›¾ç‰‡
â”œâ”€â”€ src/                     # æºä»£ç 
â”‚   â”œâ”€â”€ assets/             # é™æ€èµ„æº
â”‚   â”œâ”€â”€ background/         # Background Service Worker
â”‚   â”œâ”€â”€ content/            # Content Scripts
â”‚   â”œâ”€â”€ core/               # æ ¸å¿ƒæ¨¡å—
â”‚   â”œâ”€â”€ ui/                 # UI ç»„ä»¶
â”‚   â””â”€â”€ utils/              # å·¥å…·å‡½æ•°
â”œâ”€â”€ scripts/                # æ„å»ºè„šæœ¬
â”œâ”€â”€ manifest.json           # æ‰©å±•æ¸…å•
â”œâ”€â”€ vite.config.js          # Vite é…ç½®
â”œâ”€â”€ package.json            # é¡¹ç›®é…ç½®
â”œâ”€â”€ BRANCHING_STRATEGY.md   # åˆ†æ”¯ç­–ç•¥
â””â”€â”€ CONTRIBUTING.md         # æœ¬æ–‡ä»¶
```

## ğŸ¯ å¼€å‘å»ºè®®

### æ€§èƒ½è€ƒè™‘

- é¿å…åœ¨ content script ä¸­è¿›è¡Œå¤§é‡è®¡ç®—
- ä½¿ç”¨ `requestAnimationFrame` è¿›è¡ŒåŠ¨ç”»
- åŠæ—¶æ¸…ç†äº‹ä»¶ç›‘å¬å™¨
- æ³¨æ„å†…å­˜æ³„æ¼

### å…¼å®¹æ€§

- ç›®æ ‡ Chrome ç‰ˆæœ¬: 88+
- ä½¿ç”¨ Manifest V3
- æµ‹è¯•ä¸åŒæ“ä½œç³»ç»Ÿï¼ˆWindows, macOS, Linuxï¼‰

### å®‰å…¨æ€§

- ä¸è¦åœ¨ä»£ç ä¸­ç¡¬ç¼–ç å¯†é’¥
- éªŒè¯æ‰€æœ‰ç”¨æˆ·è¾“å…¥
- ä½¿ç”¨æœ€å°æƒé™åŸåˆ™
- æ³¨æ„ XSS å’Œæ³¨å…¥æ”»å‡»

## ğŸ“ è”ç³»æ–¹å¼

- **GitHub Issues**: [æäº¤ Issue](https://github.com/zhangsong-github/mouse-guesture-crx/issues)
- **Email**: zhangsongai3@gmail.com
- **è®¨è®º**: [GitHub Discussions](https://github.com/zhangsong-github/mouse-guesture-crx/discussions)

## ğŸ™ è‡´è°¢

æ„Ÿè°¢æ‰€æœ‰è´¡çŒ®è€…ï¼ä½ ä»¬çš„è´¡çŒ®è®©è¿™ä¸ªé¡¹ç›®å˜å¾—æ›´å¥½ã€‚

---

**å†æ¬¡æ„Ÿè°¢ä½ çš„è´¡çŒ®ï¼** ğŸ‰
